var netcore_angular_formDefaults={onSuccess:function(){},onFail:function(){},onClientFail:function(){},onServerFail:function(){}};(function(){function t(n,t,r){r.action==="push"?i(n,t).push(r.data):r.action==="set"?n[t]=r.data:r.action==="edit"&&(n[t][r.index]=r.data)}function i(n,t){var i=t.split("."),r;for(curr=n,r=0;r<i.length-1;r++)(typeof curr[i[r]]=="undefined"||curr[i[r]]===null)&&(curr[i[r]]={}),curr=curr[i[r]];return(typeof curr[i[i.length-1]]=="undefined"||curr[i[i.length-1]]===null)&&(curr[i[i.length-1]]=[]),curr[i[i.length-1]]}var n=netcore_angular_formDefaults;angular.module("netcore-angular",[]).run(function(n){n.scopeAccess={}}).directive("swapable",function(){return{scope:!0,restrict:"A",controller:function(n){n.swapCurrentIndex=0;n.swap=function(){n.swapCurrentIndex=1-n.swapCurrentIndex};n.swapTo=function(t){n.swapCurrentIndex=t}}}}).directive("swapIndex",function(){return{scope:!0,restrict:"A",controller:function(n,t,i){n.swappedIn=!1;n.$parent.$watch("swapCurrentIndex",function(r){r===Number(t.swapIndex)?(n.swappedIn=!0,i.show(),typeof t.loadOnSwap!="undefined"&&t.loadOnSwap==="true"&&n.loadContent()):(n.swappedIn=!1,i.hide(),typeof t.loadOnSwap!="undefined"&&t.loadOnSwap==="true"&&n.unloadContent())});n.swap=function(){n.$parent.swap()}}}}).directive("loadUrl",function(){return{scope:!0,restrict:"A",controller:function(n,t,i,r){n.loadContent=function(){i.get(t.loadUrl).then(function(n){r.html(n.data)},function(n){console.error("unable to load content from "+t.loadUrl,n)})};n.unloadContent=function(){r.html("")}}}}).directive("loadOnSwap",function(){return{scope:!0,restrict:"A",controller:function(n,t){n.$parent.$watch("swappedIn",function(i){typeof t.loadUrl=="undefined"?console.error("no load-url defined for loading"):t.loadOnSwap==="true"&&typeof i!="undefined"&&(i?n.loadContent():n.unloadContent())})}}}).directive("setToScope",function(){return{scope:!0,restrict:"A",controller:function(n,t){typeof netcore_angular_pairs!="undefined"&&typeof n.netcoreAngularSet!="undefined"&&(t[n.setToScope]=netcore_angular_pairs[n.netcoreAngularSet])}}}).directive("listeningRootKey",function(){return{scope:!0,restrict:"A",controller:function(n,i,r){typeof r.listeningRootKey!="undefined"&&i.$watch("scopeAccess."+r.listeningRootKey,function(i){if(typeof i!="undefined"){var u=null;if(typeof r.targetScope!="undefined")u=r.targetScope;else if(typeof i.scopeKey!="undefined")u=i.scopeKey;else return;t(n,u,i)}})}}}).directive("angSubmit",function(){return{scope:!0,restrict:"A",controller:function(i,r,u,f,e){u.submit(function(o){if(o.preventDefault(),$(this).valid())f.post($(this).attr("action"),$(this).keyValArray()).then(function(o){n.onSuccess(o,i,f,e,u,r);if(typeof e.onSuccess!="undefined"&&(typeof i[e.onSuccess]=="function"?i[e.onSuccess](o):console.error("No function found in scope with the name "+e.onSuccess)),typeof e.onSuccessSwap!="undefined"&&e.onSuccessSwap==="true"){for(swapScope=i;typeof swapScope!="undefined"&&typeof swapScope.swap!="function";)swapScope=i.$parent;typeof swapScope!="undefined"&&swapScope.swap()}typeof e.onSuccessAppend!="undefined"&&(typeof e.onSuccessAppendExternal!="undefined"?r.scopeAccess[e.onSuccessAppendExternal]={action:"push",scopeKey:e.onSuccessAppend,data:o.data}:t(i,e.onSuccessAppend,{action:"push",data:o.data}));typeof e.onSuccessEdit!="undefined"&&typeof e.onSuccessEditIndex!="undefined"&&(typeof e.onSuccessEditExternal!="undefined"?r.scopeAccess[e.onSuccessEditExternal]={action:"edit",scopeKey:e.onSuccessEdit,index:e.onSuccessEditIndex,data:o.data}:t(i,e.onSuccessEdit,{action:"edit",index:e.onSuccessEditIndex,data:o.data}));typeof e.onSuccessSet!="undefined"&&(typeof e.onSuccessSetExternal!="undefined"?r.scopeAccess[e.onSuccessSetExternal]={action:"set",scopeKey:e.onSuccessSet,data:o.data}:t(i,e.onSuccessSet,{action:"set",data:o.data}));u.find("input:not([type=button],[type=submit],[type=hidden])").val("");u.find("[data-valmsg-for]").text("")},function(t){typeof e.onFailureLoadResult!="undefined"&&e.onFailureLoadResult==="true"&&u.html(t.data);n.onServerFail(t,i,e,f,u,r);n.onFail(t,i,e,f,u,r)});else{n.onClientFail(i,e,f,u,r);n.onFail(null,i,e,f,u,r)}})}}})})(),function(n){n.fn.keyValArray=function(){var t={};return n.each(n(this).serializeArray(),function(){t[this.name]=this.value}),t}}(jQuery);